var bs;!function(e){var o;!function(e){var o;!function(e){e.Templates={projectAbout:'<div class="header row">        <div class="col-xs-3">            <section id="titlebar" class="bs-nav-titlebar-section" style="display: block;">                <div class="bs-nav-titlebar">                    <h2 class="bs-nav-titlebar-group project-detail-title">                        <a class="btn ilmn-gray bs-nav-back" href="/projects/" data-bs-follow-link="true">                            <span class="illumicons caret-left medium"></span>                            <span class="bs-nav-back-text">Projects: </span>                        </a>                        <span class="bs-nav-title-text">{{ project.Name }}</span>                    </h2>                </div>            </section>        </div>        <div class="col-xs-9">            <bs-project-detail-toolbar project="project"></bs-project-detail-toolbar>        </div>    </div>    <div class="content container">        <div class="row">                        <div class="col-xs-2">                <bs-project-side-nav active-link="about"></bs-project-side-nav>                        </div>            <div class="col-xs-10">                <section id="about-section" style="display: block;">                                        <div class="bs-project-about-container container">                        <div class="row">                            <div class="col-xs-9 bs-project-about-left-col">                                <h2 class="bs-section-heading">About</h2>                                <p ng-if="!project.Description"><em>Click "Edit Project" to add a description.</em></p>                                <section ng-if="project.Description" id="project-description">{{ project.Description }}</section>                            </div>                            <div class="col-xs-3 bs-aside-info-right">                                <ul class="bs-list-metadata" id="project-details">                                    <li id="project-owner"><img class="bs-avatar-icon" src="{{ project.UserOwnedBy.GravatarUrl }}" width="30" height="30" /> {{ project.UserOwnedBy.Name }}</li>                                    <li id="project-sharing-status">                                        <span ng-if="collaboratorCount > 0"><span class="icomoon icon-people"></span> Shared</span>                                        <span ng-if="collaboratorCount == 0"><span class="icomoon icon-one-person"></span> Not shared</span>                                    </li>                                    <li>                                        <span class="icomoon icon-calendar"></span>                                        {{ project.DateCreated | date: \'EEEE, MMMM d, y, h:mm:ss a\' }}                                    </li>                                    <li><span>Size:&nbsp;{{ project.TotalSize | bytes: 2 }}</span></li>                                </ul>                                                <h3 ng-if="collaboratorCount" class="bs-section-subheading">COLLABORATORS ({{ collaboratorCount }})</h3>                                <ul ng-if="!isOwner" class="bs-list-metadata">                                    <li><span style="font-size:smaller;color:#ddd;">Collaborator details are visible only to the owner.</span></li>                                </ul>                                <ul ng-if="collaborators.length" class="bs-list-metadata" id="project-collaborators">                                                    <li ng-repeat="collaborator in collaborators">                                        <img class="bs-avatar-icon"                                                src="https://secure.gravatar.com/avatar/{{ collaborator.emailMD5 }}.jpg?s=30&d=https://basespace.illumina.com/public/images/DefaultCustomerGravatar.png&r=PG"                                                width="30"                                                height="30" />                                        {{ collaborator.userName }}                                    </li>                                </ul>                            </div>                        </div>                    </div>                </section>                        </div>                    <div class="clear"></div>    </div>',projectAnalysis:'<div class="header row">        <div class="col-xs-3">            <section id="titlebar" class="bs-nav-titlebar-section" style="display: block;">                <div class="bs-nav-titlebar">                    <h2 class="bs-nav-titlebar-group project-detail-title">                        <a class="btn ilmn-gray bs-nav-back" href="/projects/" data-bs-follow-link="true">                            <span class="illumicons caret-left medium"></span>                            <span class="bs-nav-back-text">Projects: </span>                        </a>                        <span class="bs-nav-title-text">{{ project.Name }}</span>                    </h2>                </div>            </section>        </div>        <div class="col-xs-9">            <bs-project-detail-toolbar selections="selections" grid-data-source="gridOptions.gridDataSource" project="project"></bs-project-detail-toolbar>        </div>    </div>    <div class="content container">        <div class="row">            <div class="col-xs-2">                <bs-project-side-nav active-link="analyses"></bs-project-side-nav>            </div>            <div class="col-xs-10">                <section id="analyses-section" style="display: block;">                    <div class="bs-project-analysis-container" id="project-analysis-container">                        <h4 class="pull-left">Analyses</h4>                        <div class="bs-header-line-scb">                            <bs-selection-count-badge badge-data="badgeData"></bs-selection-count-badge>                        </div>                     </div>                    <bs-tang-grid ng-if="!isLoading" grid-options="gridOptions" selections="selections"></bs-tang-grid>                </section>            </div>        </div>    </div>',projectAnalysisGridName:'<div>        <a href="/appsession/{{ rowData.Id }}/route?projectId={{ gridOptions.dataAccessor.projectId }}">            {{ rowData.Name }}        </a>    </div>',v1ProjectAnalysisGridModified:"<div>{{ rowData.ModifiedOn | twitterTime }}</div>",v2ProjectAnalysisGridModified:"<div>{{ rowData.DateModified | twitterTime }}</div>",v1ProjectAnalysisGridStatus:'<div>        <span class="bs-tooltip badge status">            <bs-tooltip placement="e" can-open-if="rowData.StatusSummary.length > 0">                <div class="bs-tooltip-content dark">                    {{rowData.StatusSummary}}                </div>            </bs-tooltip>            <div class=\'bs-tooltip-content dark\'>{{ rowData.ExecutionStatus ? rowData.ExecutionStatus : rowData.Status }}</div>        </span>    </div>',v2ProjectAnalysisGridStatus:'<bs-app-session-combined-status app-session="rowData"></bs-app-session-combined-status>',projectAnalysisGridApplication:'<div>        <span ng-if="rowData.Application">{{ rowData.Application.Name }}</span>        <span ng-if="!rowData.Application">--</span>    </div>',projectAnalysisGridSize:'<div class="bs-numeric nowrap">{{ rowData.TotalSize | bytes }}</div>',projectDetailToolbar:'<section class="toolbar-container" id="toolbar-analyses-container">        <div>            <menu class="bs-toolbar-main">                <span class="bs-toolbar-primary">                    <span>                        <bs-launch-app-drop-down project="project"></bs-launch-app-drop-down>                    </span>                </span>                <span ng-show="!selections.length" class="bs-toolbar-secondary">                    <span>                        <button class="btn bs-toolbar-btn btn-large" ng-click="onDownloadProjectClick()">                            <span class="icomoon icon-download"></span> <label>Download Project</label>                        </button>                        <button ng-show="btnImportVisible" class="btn bs-toolbar-btn btn-large" ng-click="onImportClick()">                            <span class="icomoon icon-upload"></span> <label>Import</label>                        </button>                        <button ng-show="btnShareVisible" class="btn bs-toolbar-btn btn-large" ng-click="onShareProjectClick()">                            <span class="icomoon icon-share"></span> <label>Share project</label>                        </button>                        <button ng-show="btnGetLinkVisible" class="btn bs-toolbar-btn btn-large" ng-click="onGetLinkClick()">                            <span class="icomoon icon-link"></span> <label>Get link</label>                        </button>                        <button ng-show="btnEditProjectVisible" class="btn bs-toolbar-btn btn-large" ng-click="onEditProjectClick()">                            <span class="icomoon icon-edit"></span> <label>Edit project</label>                        </button>                        <button ng-show="btnTransferVisible" class="btn bs-toolbar-btn btn-large" style="display: inline-block;" ng-click="onTransferClick()">                            <span class="icomoon icon-key"></span> <label>Transfer Owner</label>                        </button>                        <button ng-show="btnPendingTransferVisible" class="btn btn-large bs-toolbar-main-btn-pendingtransfer" ng-click="onPendingTransferClick()">                            <span class="icomoon icon-key"></span> <label>Pending Transfer</label>                        </button>                                                <button ng-show="btnMoveToTrashVisible" class="btn bs-toolbar-btn btn-large" ng-click="onMoveToTrashClick()">                            <span class="icomoon icon-delete"></span> <label>Move to Trash</label>                        </button>                    </span>                </span>                                <span ng-show="selections.length" class="bs-toolbar-secondary">                    <span>                        <button class="btn bs-toolbar-btn btn-large" ng-click="onDownloadAnalysesClick()">                            <span class="icomoon icon-download"></span> <label>Download Analyses</label>                        </button>                        <button ng-if="biosampleRegistryEnabled" ng-disabled="!changeQcAction.isEnabled()" class="btn bs-toolbar-btn btn-large" ng-click="changeQcAction.act()">                            <span class="{{ changeQcAction.iconClass }}"></span>                            <label>{{ changeQcAction.label }}</label>                        </button>                        <button ng-if="appSessionDeliveryEnabled" ng-disabled="!changeDeliveryAction.isEnabled()"                                class="btn bs-toolbar-btn btn-large" ng-click="changeDeliveryAction.act()">                            <span class="{{ changeDeliveryAction.iconClass }}"></span>                            <label>{{ changeDeliveryAction.label }}</label>                        </button>                        <button ng-show="btnMoveToTrashVisible" class="btn bs-toolbar-btn btn-large" ng-click="onMoveToTrashClick()">                            <span class="icomoon icon-delete"></span> <label>Move to Trash</label>                        </button>                    </span>                </span>            </menu>        </div>    </section>',projectImportFile:'<div class="header row">        <div class="col-xs-6">            <div class="title-and-breadcrumb-container">                <div class="breadcrumbs">                    <section id="titlebar" class="bs-nav-titlebar-section" style="display: block;">                        <div class="bs-nav-titlebar">                            <h2 class="bs-nav-titlebar-group">                                <a class="btn ilmn-gray bs-nav-back" href="/projects/" data-bs-follow-link="true">                                    <span class="illumicons caret-left medium"></span>                                    <span class="bs-nav-back-text">Projects: </span>                                </a>                                <span class="bs-nav-back-text"><a ng-href="{{ { Project : project } | uiHref : \'project\' }}">{{ project.Name }}</a> : Import</span>                            </h2>                        </div>                                </section>                </div>            </div>        </div>    </div>    <div class="content" id="import-section" style="display: block;" >        <bs-importer ng-if="isLoaded" project-id="{{project.Id}}" app-session-id="{{appSession.Id}}" type="{{importType}}"></bs-importer>    </div>',projectsListToolbar:'<section id="toolbar-projects-list-container">        <div>            <menu class="bs-toolbar-main no-title-bar">                <button class="btn bs-toolbar-btn btn-large" ng-click="onNewProjectClick()">                    <span class="icomoon icon-new-project"></span> <label>New Project</label>                </button>                <button ng-class="{ \'disabled\': btnEditProjectDisabled }" ng-disabled="btnEditProjectDisabled" class="btn bs-toolbar-btn btn-large" ng-click="onEditProjectClick()">                        <span class="icomoon icon-edit"></span> <label>Edit project</label>                    </button>                <button ng-class="{ \'disabled\': btnShareProjectDisabled }" ng-disabled="btnShareProjectDisabled" class="btn bs-toolbar-btn btn-large" ng-click="onShareProjectClick()">                    <span class="icomoon icon-share"></span> <label>Share Project</label>                </button>                <button ng-class="{ \'disabled\': btnGetLinkDisabled }" ng-disabled="btnGetLinkDisabled" class="btn bs-toolbar-btn btn-large" ng-click="onGetLinkClick()">                    <span class="icomoon icon-link"></span> <label>Get Link</label>                </button>                <button ng-show="btnTransferVisible" ng-class="{ \'disabled\': btnTransferDisabled }" ng-disabled="btnTransferDisabled" class="btn bs-toolbar-btn btn-large" ng-click="onTransferClick()">                    <span class="icomoon icon-key"></span> <label>Transfer Owner</label>                </button>                <button ng-show="btnPendingTransferVisible" class="btn bs-toolbar-btn btn-large bs-toolbar-main-btn-pendingtransfer" ng-click="onPendingTransferClick()">                    <span class="icomoon icon-key"></span> <label>Pending Transfer</label>                </button>                <button ng-show="btnMoveToTrashVisible" class="btn bs-toolbar-btn btn-large" ng-click="onMoveToTrashClick()">                    <span class="icomoon icon-delete"></span> <label>Move to Trash</label>                </button>            </menu>        </div>    </section>',projectSamplesToolbar:'<section class="toolbar-container" id="toolbar-analyses-container">        <div>            <menu class="bs-toolbar-main">                <span class="bs-toolbar-primary">                    <span>                        <bs-launch-app-drop-down project="project"></bs-launch-app-drop-down>                    </span>                </span>                <span class="bs-toolbar-secondary">                    <span>                        <button class="btn bs-toolbar-btn btn-large" ng-click="onDownloadSamplesClick()">                            <span class="icomoon icon-download"></span> <label>Download Samples</label>                        </button>                        <button ng-class="{ \'disabled\': btnCombineSamplesDisabled }" ng-disabled="btnCombineSamplesDisabled" class="btn bs-toolbar-btn btn-large" ng-click="onCombineSamplesClick()">                            <span class="icomoon icon-merge"></span> <label>Combine</label>                        </button>                        <button class="btn bs-toolbar-btn btn-large" ng-click="onCopyToClick()">                            <span class="icomoon icon-copy"></span> <label>Copy to...</label>                        </button>                        <button ng-class="{ \'disabled\': btnMoveToTrashDisabled }" ng-disabled="btnMoveToTrashDisabled" ng-show="btnMoveToTrashVisible" class="btn bs-toolbar-btn btn-large" ng-click="onMoveToTrashClick()">                            <span class="icomoon icon-delete"></span> <label>Move to Trash</label>                        </button>                    </span>                </span>            </menu>        </div>    </section>',projectSideNav:'<nav class="bs-nav-side">        <ul>            <li ng-class="{\'active\': activeLink == \'about\'}">                <a id="nav-about-link" class="nav-about-link" href="{{ siteUrl }}/projects/{{ projectIdUrl }}/about"><label>About</label></a>            </li>            <li ng-class="{\'active\': activeLink == \'analyses\'}">                <a id="nav-analyses-link" class="nav-analyses-link" href="{{ siteUrl }}/projects/{{ projectIdUrl }}/analyses"><label>Analyses</label></a>            </li>            <li ng-class="{\'active\': activeLink == \'samples\'}">                <a id="nav-samples-link" class="nav-samples-link" href="{{ siteUrl }}/projects/{{ projectIdUrl }}/samples"><label>Samples</label></a>            </li>        </ul>    </nav>',projectsList:'<div class="header row">        <div class="col-xs-4">            <div class="title-and-breadcrumb-container">                <h1 class="page-title">Projects</h1>            </div>        </div>        <div class="col-xs-8">            <bs-projects-list-toolbar class="pull-right" grid-data-source="gridOptions.gridDataSource" selections="selections"></bs-projects-list-toolbar>        </div>    </div>    <div class="content project-list-table">        <span class="badge-light" title="Total Count">Showing {{ gridOptions.gridDataSource.items.length }} of {{ gridOptions.gridDataSource.totalCount }}</span>        <bs-tang-grid grid-options="gridOptions" class="bs-runs-grid" selections="selections"></bs-tang-grid>    </div>',projectsListGridName:'<div class="bs-projects-list-name-column">        <span ng-if="!rowData.HasCollaborators" class="icomoon icon-project"></span>        <span ng-if="rowData.HasCollaborators" class="icomoon icon-shared-project"></span>        <a ng-href="/projects/{{ rowData.Id }}">{{ rowData.Name }}</a>    </div>',projectsListGridDateCreated:"<div>        {{ rowData.DateModified | twitterTime }}    </div>",projectsListTotalSize:'<div class="nowrap" ng-if="rowData.TotalSize > 0">{{ rowData.TotalSize | bytes: 2 }}</div>    <div class="nowrap" ng-if="!(rowData.TotalSize > 0)">--</div>',projectSamples:'<div class="header row">        <div class="col-xs-3">            <section id="titlebar" class="bs-nav-titlebar-section" style="display: block;">                <div class="bs-nav-titlebar">                    <h2 class="bs-nav-titlebar-group project-detail-title">                        <a class="btn ilmn-gray bs-nav-back" href="/projects/" data-bs-follow-link="true">                            <span class="illumicons caret-left medium"></span>                            <span class="bs-nav-back-text">Projects: </span>                        </a>                        <span class="bs-nav-title-text">{{ project.Name }}</span>                    </h2>                </div>            </section>        </div>        <div class="col-xs-9">            <bs-project-detail-toolbar ng-show="!selections.length" selections="selections" project="project"></bs-project-detail-toolbar>            <bs-project-samples-toolbar ng-show="selections.length" grid-data-source="gridOptions.gridDataSource" selections="selections" project="project"></bs-project-samples-toolbar>        </div>    </div>    <div class="content container">        <div class="row">                        <div class="col-xs-2">                <bs-project-side-nav active-link="samples"></bs-project-side-nav>                        </div>            <div class="col-xs-10">                    <section id="samples-section" style="display: block;">                    <div class="bs-project-sample-container" id="project-sample-container">                        <h4 class="pull-left">Samples</h4>                        <div class="bs-header-line-scb">                            <bs-selection-count-badge badge-data="badgeData"></bs-selection-count-badge>                        </div>                    </div>                    <bs-tang-grid grid-options="gridOptions" selections="selections"></bs-tang-grid>                </section>            </div>        </div>    </div>',projectSamplesGridSampleId:'<div><a ng-href="/sample/{{ rowData.Id }}/{{ rowData.SampleId | toLegalUrl }}">{{ rowData.SampleId }}</a></div>',projectSamplesGridDateCreated:'<div>{{ rowData.DateCreated | date: "MMM dd, yyyy" }}</div>',projectSamplesGridReadLength:"<div>{{ rowData | readLengthString }}</div>",projectSamplesGridGenome:"<div>{{ rowData.Genome.DisplayName }}</div>",projectSamplesGridOrigin:'<div ng-if="rowData.IsMerged">combined</div>    <div ng-if="!rowData.IsMerged">{{ rowData.ExperimentName }}</div>',projectSamplesGridTotalSize:'<div class="bs-numeric nowrap">{{ rowData.TotalSize | bytes }}</div>'}}(o=e.Projects||(e.Projects={}))}(o=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var o;!function(o){var t;!function(o){o.moduleName="bs.Areas.Projects",o.projectsModule=angular.module(o.moduleName,["ngAnimate","ngRoute",e.Common.commonModuleName]),o.projectsModule.config(["$routeProvider","$locationProvider","$httpProvider",function(e,t){e.when("/trashanalysismodal",{template:o.Templates.projectsList,controller:o.projectsListControllerName}).when("/:id",{template:o.Templates.projectAnalysis,controller:o.projectAnalysisControllerName}).when("/:id/samples",{template:o.Templates.projectSamples,controller:o.projectSamplesControllerName}).when("/:id/about",{template:o.Templates.projectAbout,controller:o.projectAboutControllerName}).when("/:id/import",{template:o.Templates.projectImportFile,controller:o.projectImportFileControllerName}).when("/:id/import/:idToken",{template:o.Templates.projectImportFile,controller:o.projectImportFileControllerName}).when("/:id/analyses",{template:o.Templates.projectAnalysis,controller:o.projectAnalysisControllerName}).when("/:id/:name",{template:o.Templates.projectAnalysis,controller:o.projectAnalysisControllerName}).otherwise({template:o.Templates.projectsList,controller:o.projectsListControllerName,reloadOnSearch:!1});var s={enabled:!0,requireBase:!0};t.html5Mode(s).hashPrefix("!")}])}(t=o.Projects||(o.Projects={}))}(o=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var o;!function(o){var t;!function(o){o.projectDetailToolbarDirectiveName="bsProjectDetailToolbar";var t=e.Common.Interfaces.CodeFeatures;o.projectsModule.directive(o.projectDetailToolbarDirectiveName,function(){return new s});var s=function(){function s(){this.template=o.Templates.projectDetailToolbar,this.restrict="E",this.scope={selections:"=?",gridDataSource:"=?",project:"=?"},this.controller=["$rootScope","$scope","$window","$http","$filter",e.Common.Services.ServerConfig.serverConfigServiceName,e.Common.Services.ModalDialog.serviceName,e.Common.Services.utcDateServiceName,e.Common.Services.Search.searchQueryServiceName,e.Common.Services.currentUserServiceName,e.Common.Services.ChangeQc.changeQcServiceName,e.Common.AppSession.changeAppSessionQcStrategyName,e.Common.AppSession.changeDeliveryServiceName,e.Common.AppSession.changeAppSessionDeliveryStrategyName,function(o,s,a,r,i,n,l,c,d,p,b,m,u,v){p.getCurrentUser(!1).then(function(e){s.biosampleRegistryEnabled=t.bioSampleRegistryEnabled(e),s.appSessionDeliveryEnabled=t.appSessionDeliveryEnabled(e)}),s.$watch("project",function(e,o){s.btnTransferVisible=!1,s.btnPendingTransferVisible=!1,s.btnGetLinkVisible=!1,s.btnImportVisible=!1,s.btnShareVisible=!1,s.btnEditProjectVisible=!1,s.project&&(s.project.UserOwnedBy.Id==n.currentUserId&&(s.btnImportVisible=!0,s.btnShareVisible=!0,s.btnEditProjectVisible=!0,s.btnGetLinkVisible=!0,s.project.IsTransferPending&&(s.btnPendingTransferVisible=!0),s.project.IsTransferPending||(s.btnTransferVisible=!0)),s.btnMoveToTrashVisible=!0)},!0),s.onMoveToTrashClick=function(){var e={masterTemplate:'<bs-trash-modal dialog-scope="dialogScope"></bs-trash-modal>'},o={resourceType:"project",selections:[s.project],gridDataSource:s.gridDataSource,redirectUrl:"/projects",redirectToExternalApp:!0};s.selections&&s.selections.length>0&&(o.resourceType="appSession",o.selections=s.selections,o.redirectUrl=null,o.redirectToExternalApp=!1),l.showModal(e,o)},s.onTransferClick=function(){var e={masterTemplate:"<bs-transfer-modal dialog-scope='dialogScope'></bs-transfer-modal>"},o={resourceType:"project",resourceId:s.project.Id,resource:s.project};l.showModal(e,o)},s.onPendingTransferClick=function(){var e={masterTemplate:"<bs-transfer-pending-modal dialog-scope='dialogScope'></bs-transfer-pending-modal>"},o={resourceType:"project",resourceId:s.project.Id,resource:s.project};l.showModal(e,o)},s.onEditProjectClick=function(){var e={masterTemplate:'<bs-edit-project-modal dialog-scope="dialogScope"></bs-edit-project-modal>'},o={selections:s.selections,gridDataSource:s.gridDataSource,project:s.project};l.showModal(e,o)},s.onDownloadProjectClick=function(){var e={masterTemplate:'<bs-download-modal dialog-scope="dialogScope"></bs-download-modal>'},o={downloadType:"Project",ids:[s.project.Id]};r({method:"POST",url:"/apps/triggerdownload",data:JSON.stringify(o)}).success(function(o,t,s,a){var r={downloadUri:o.downloadUri};l.showModal(e,r)}).error(function(e,o,t,s){})},s.onDownloadAnalysesClick=function(){var e={masterTemplate:'<bs-download-modal dialog-scope="dialogScope"></bs-download-modal>'},o=[];angular.forEach(s.selections,function(e){return o.push(e.Id)});var t={downloadType:"AppSession",ids:o};r({method:"POST",url:"/apps/triggerdownload",data:JSON.stringify(t)}).success(function(o,t,s,a){var r={downloadUri:o.downloadUri};l.showModal(e,r)}).error(function(e,o,t,s){})},s.onImportClick=function(){a.location.href="/projects/"+s.project.Id+"/import"},s.onShareProjectClick=function(){var e={masterTemplate:"<bs-share-modal dialog-scope='dialogScope'></bs-share-modal>"},o={resourceType:"project",resource:s.project};l.showModal(e,o)},s.onGetLinkClick=function(){var e={masterTemplate:"<bs-get-link-modal dialog-scope='dialogScope'></bs-get-link-modal>"},o={resource:s.project,resourceType:"project"};l.showModal(e,o)},s.changeQcAction=new e.Common.Actions.Action({label:"Change QC",iconClass:"fa fa-hourglass-end fa-lg",isEnabled:function(){var o=s.selections,t=o.every(function(o){return o.ExecutionStatus===e.Common.Interfaces.AppSessionStatus.COMPLETE});return o.length>0&&t},act:function(){var e=s.selections,o={selections:e,status:null,serverError:null};b.showModal(m,o)}}),s.changeDeliveryAction=new e.Common.Actions.Action({label:"Change Delivery",iconClass:"fa fa-hourglass-end fa-lg",isEnabled:function(){var e=s.selections;return e.length>0},act:function(){var e=s.selections,o={selections:e,deliveryStatus:null,serverError:null};u.showModal(v,o)}})}]}return s.prototype.includeFileScope=function(){return"&scope=appresult_files,sample_files"},s}();o.ProjectDetailToolbarDirective=s}(t=o.Projects||(o.Projects={}))}(o=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var o;!function(o){var t;!function(o){var t=e.Common.Directives.ImporterDirective;o.projectImportFileControllerName="bsProjectImportFile",o.projectsModule.controller(o.projectImportFileControllerName,["$http","$location","$scope","$routeParams",e.Common.Services.ServerConfig.serverConfigServiceName,e.Common.Services.Api.apiServiceName,"$q",e.Common.Services.siteNavigationServiceName,function(e,o,t,a,r,i,n,l){return new s(e,o,t,a,r,i,n,l)}]);var s=function(){function e(e,o,s,a,r,i,n,l){l.setCurrentLocation("projects"),s.isLoaded=!1;var c=[],d=a.id,p=a.idToken,b=i.Project.get({Id:d},function(e){s.project=e.Response,s.project.UserOwnedBy.Id!==r.currentUserId&&o.path("/"+d+"/")});if(c.push(b.$promise),p){var m=i.AppSession.get({Id:p},function(e){s.appSession=e.Response,e.Response.UserCreatedBy.Id!==r.currentUserId&&o.path("/"+d+"/")}),u=i.AppSession.getProperty({Id:p,propertyName:t.IMPORT_TYPE_PROPERTY_NAME},function(e){s.importType=e.Response.Content},function(){});c.push(m.$promise,u.$promise)}n.all(c).then(function(){s.isLoaded=!0})}return e}();o.ProjectImportFileController=s}(t=o.Projects||(o.Projects={}))}(o=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var o;!function(e){var o;!function(e){e.projectSideNavDirectiveName="bsProjectSideNav",e.projectsModule.directive(e.projectSideNavDirectiveName,function(){return new o});var o=function(){function o(){this.template=e.Templates.projectSideNav,this.restrict="E",this.scope={activeLink:"@"},this.controller=["$scope","$location","$routeParams",function(e,o,t){e.projectIdUrl=t.id,e.siteUrl=o.protocol()+"://"+o.host()}]}return o}();e.ProjectSideNavDirective=o}(o=e.Projects||(e.Projects={}))}(o=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var o;!function(o){var t;!function(o){o.projectsListToolbarDirectiveName="bsProjectsListToolbar",o.projectsModule.directive(o.projectsListToolbarDirectiveName,function(){return new t});var t=function(){function t(){this.template=o.Templates.projectsListToolbar,this.restrict="E",this.scope={selections:"=?",gridDataSource:"=?"},this.controller=["$scope",e.Common.Services.ModalDialog.serviceName,e.Common.Services.Api.apiServiceName,e.Common.Services.ServerConfig.serverConfigServiceName,function(e,o,t,s){e.$watch("selections",function(o,t){if(e.selections&&e.selections.length){e.btnShareProjectDisabled=!1,e.btnGetLinkDisabled=!1,e.btnEditProjectDisabled=!1,e.btnMoveToTrashVisible=!0,e.btnTransferDisabled=!1,e.btnPendingTransferVisible=!1;var a=e.selections[0];a.UserOwnedBy.Id!=s.currentUserId&&(e.btnTransferDisabled=!0,e.btnGetLinkDisabled=!0,e.btnShareProjectDisabled=!0,e.btnEditProjectDisabled=!0),a.UserOwnedBy.Id!==s.currentUserId||a.IsTransferPending||(e.btnTransferVisible=!0),a.UserOwnedBy.Id===s.currentUserId&&a.IsTransferPending&&(e.btnPendingTransferVisible=!0,e.btnTransferVisible=!1)}else e.btnShareProjectDisabled=!0,e.btnGetLinkDisabled=!0,e.btnTransferDisabled=!0,e.btnEditProjectDisabled=!0,e.btnTransferVisible=!0,e.btnPendingTransferVisible=!1,e.btnMoveToTrashVisible=!1},!0),e.onNewProjectClick=function(){var t={masterTemplate:"<bs-create-project-modal dialog-scope='dialogScope'></bs-create-project-modal>"},s={gridDataSource:e.gridDataSource};o.showModal(t,s)},e.onEditProjectClick=function(){var t={masterTemplate:'<bs-edit-project-modal dialog-scope="dialogScope"></bs-edit-project-modal>'},s={selections:e.selections,gridDataSource:e.gridDataSource,project:e.selections[0]};o.showModal(t,s)},e.onShareProjectClick=function(){var t={masterTemplate:"<bs-share-modal dialog-scope='dialogScope'></bs-share-modal>"},s={selections:e.selections,resourceType:"project"};o.showModal(t,s)},e.onGetLinkClick=function(){var t={masterTemplate:"<bs-get-link-modal dialog-scope='dialogScope'></bs-get-link-modal>"},s={selections:e.selections,gridDataSource:e.gridDataSource,resourceType:"project"};o.showModal(t,s)},e.onTransferClick=function(){var t={masterTemplate:"<bs-transfer-modal dialog-scope='dialogScope'></bs-transfer-modal>"},s={selections:e.selections,gridDataSource:e.gridDataSource,resourceType:"project"};o.showModal(t,s)},e.onPendingTransferClick=function(){var t={masterTemplate:"<bs-transfer-pending-modal dialog-scope='dialogScope'></bs-transfer-pending-modal>"},s={selections:e.selections,gridDataSource:e.gridDataSource,resourceType:"project"};o.showModal(t,s)},e.onMoveToTrashClick=function(){var t={masterTemplate:'<bs-trash-modal dialog-scope="dialogScope"></bs-trash-modal>'},s={resourceType:"project",selections:e.selections,gridDataSource:e.gridDataSource};o.showModal(t,s)}}]}return t}();o.ProjectsListToolbar=t}(t=o.Projects||(o.Projects={}))}(o=e.Areas||(e.Areas={}));

}(bs||(bs={}));var bs;!function(e){var o;!function(o){var t;!function(o){o.samplesToolbarDirectiveName="bsProjectSamplesToolbar",o.projectsModule.directive(o.samplesToolbarDirectiveName,function(){return new t});var t=function(){function t(){this.template=o.Templates.projectSamplesToolbar,this.restrict="E",this.scope={selections:"=?",gridDataSource:"=?",project:"=?"},this.controller=["$scope","$filter","$http",e.Common.Services.ModalDialog.serviceName,e.Common.Services.utcDateServiceName,e.Common.Services.Search.searchQueryServiceName,e.Common.Services.ServerConfig.serverConfigServiceName,function(e,o,t,s,a,r,i){e.btnMoveToTrashDisabled=!0,e.btnMoveToTrashVisible=!1,e.$watch("selections",function(o,t){if(e.btnCombineSamplesDisabled=!0,e.selections&&e.selections.length>1&&e.project.UserOwnedBy.Id==i.currentUserId&&(e.btnCombineSamplesDisabled=!1),e.selections&&e.selections.length>0)for(var s=0;s<e.selections.length;s++){var a=e.selections[s];a&&a.UserOwnedBy.Id==i.currentUserId&&(e.btnMoveToTrashDisabled=!1,e.btnMoveToTrashVisible=!0)}},!0),e.onDownloadSamplesClick=function(){var o={masterTemplate:'<bs-download-modal dialog-scope="dialogScope"></bs-download-modal>'},a=[];angular.forEach(e.selections,function(e,o){a.push(e.Id)});var r={downloadType:"Sample",ids:a};t({method:"POST",url:"/apps/triggerdownload",data:JSON.stringify(r)}).success(function(e,t,a,r){var i={downloadUri:e.downloadUri};s.showModal(o,i)}).error(function(e,o,t,s){})},e.onCombineSamplesClick=function(){var o={masterTemplate:'<bs-sample-combine-modal dialog-scope="dialogScope"></bs-sample-combine-modal>'},t={selections:e.selections,gridDataSource:e.gridDataSource,resource:e.project};s.showModal(o,t)},e.onCopyToClick=function(){var o={masterTemplate:"<bs-sample-copy-modal dialog-scope='dialogScope'></bs-sample-copy-modal>"},t={selections:e.selections,gridDataSource:e.gridDataSource,resource:e.project};s.showModal(o,t)},e.onMoveToTrashClick=function(){var o={masterTemplate:'<bs-trash-modal dialog-scope="dialogScope"></bs-trash-modal>'},t={resourceType:"project",selections:[e.project],gridDataSource:e.gridDataSource};e.selections&&e.selections.length>0&&(t.resourceType="sample",t.selections=e.selections),s.showModal(o,t)}}]}return t}();o.SamplesToolbarDirective=t}(t=o.Projects||(o.Projects={}))}(o=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var o;!function(o){var t;!function(o){o.projectAboutControllerName="bsProjectAboutController",o.projectsModule.controller(o.projectAboutControllerName,["$http","$scope","$routeParams",e.Common.Services.ServerConfig.serverConfigServiceName,e.Common.Services.Api.apiServiceName,e.Common.Services.siteNavigationServiceName,function(e,o,s,a,r,i){return new t(e,o,s,a,r,i)}]);var t=function(){function e(e,o,t,s,a,r){r.setCurrentLocation("projects");var i=t.id,n=a.Project.get({Id:i},function(){o.project=n.Response,o.isOwner=o.project.UserOwnedBy.Id===s.currentUserId}),l=s.privateApiBaseUrl+"collaborator/project/"+i,c={offset:0,limit:20,sortDir:"desc",sortBy:"dateJoined"};e({method:"GET",url:l,params:c}).success(function(e,t,s,a){o.collaboratorCount=e.collaboratorCount,o.collaborators=[];for(var r=e.results,i=0;i<r.length;i++)o.collaborators.push(r[i])}).error(function(e,o,t,s){})}return e}();o.ProjectAboutController=t}(t=o.Projects||(o.Projects={}))}(o=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var o;!function(o){var t;!function(o){var t=e.Common.Interfaces.CodeFeatures;o.projectAnalysisControllerName="bsProjectAnalysisController",o.projectsModule.controller(o.projectAnalysisControllerName,["$location","$scope","$rootScope","$routeParams","$injector",e.Common.Services.Api.apiServiceName,e.Common.Services.siteNavigationServiceName,e.Common.Services.currentUserServiceName,function(e,o,t,a,r,i,n,l){return new s(e,o,t,a,r,i,n,l)}]);var s=function(){function s(s,a,r,i,n,l,c,d){c.setCurrentLocation("projects"),a.selections=[],a.isLoading=!0;var p=i.id,b=l.Project.get({Id:p},function(){a.project=b.Response});d.getCurrentUser(!1).then(function(s){a.biosampleRegistryEnabled=s.Features&&s.Features.indexOf(t.BIOSAMPLE_REGISTRY)>-1,a.appSessionDeliveryEnabled=s.Features&&s.Features.indexOf(t.APP_SESSION_DELIVERY)>-1,a.appSessionApiVersion=a.biosampleRegistryEnabled||a.appSessionDeliveryEnabled?2:1;var i=n.get(2===a.appSessionApiVersion?e.Common.Analysis.v2AnalysesGridDataSourceFactoryName:e.Common.Analysis.v1AnalysesGridDataSourceFactoryName),l=i.getDataSource();l.customParams={OutputProjects:p,SortBy:"ModifiedOn"},a.gridOptions={autofetch:!1,dataAccessor:{projectId:p},headers:[{displayName:"Name",field:"Name",sortable:!0,sortBy:"Name"},{displayName:"Last Modified",field:"DateModified",sortable:!0,sortBy:"ModifiedOn"},{displayName:"Application",field:"Application.Name",sortable:!0,sortBy:"AppName"},{displayName:"Size",field:"TotalSize",sortable:!0,sortBy:"TotalSize",thStyle:{"text-align":"right"}},{displayName:"Delivery",field:"DeliveryStatus",sortable:!1},{displayName:"Status",field:"Status",sortable:!0,sortBy:"Status"}],columns:[{field:"Name",cellTemplate:o.Templates.projectAnalysisGridName},{field:"DateModified",cellTemplate:a.biosampleRegistryEnabled?o.Templates.v2ProjectAnalysisGridModified:o.Templates.v1ProjectAnalysisGridModified},{field:"AppName",cellTemplate:o.Templates.projectAnalysisGridApplication},{field:"TotalSize",cellTemplate:o.Templates.projectAnalysisGridSize},{field:"DeliveryStatus",cellTemplate:e.Common.Templates.analysisDeliveryStatusColumn},{field:"Status",cellTemplate:a.biosampleRegistryEnabled?o.Templates.v2ProjectAnalysisGridStatus:o.Templates.v1ProjectAnalysisGridStatus}],gridDataSource:l,allowSelection:!0,multiSelection:!0},a.appSessionDeliveryEnabled||(a.gridOptions.headers=a.gridOptions.headers.filter(function(e){return"DeliveryStatus"!==e.field}),a.gridOptions.columns=a.gridOptions.columns.filter(function(e){return"DeliveryStatus"!==e.field})),a.badgeData=new e.Common.Directives.TangGrid.GridSelectionCountHelper(a.gridOptions,a.selections),a.isLoading=!1,r.$on(e.Common.Services.ChangeQc.QC_STATUS_CHANGED_EVENT,function(){a.selections.length=0,a.gridOptions.gridDataSource.fetchItems()}),r.$on(e.Common.AppSession.DELIVERY_CHANGED_EVENT,function(){a.selections.length=0,a.gridOptions.gridDataSource.fetchItems()})})}return s}();o.ProjectAnalysisController=s}(t=o.Projects||(o.Projects={}))}(o=e.Areas||(e.Areas={}))}(bs||(bs={}));var __extends=this&&this.__extends||function(e,o){function t(){this.constructor=e}for(var s in o)o.hasOwnProperty(s)&&(e[s]=o[s]);e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)},bs;!function(e){var o;!function(o){var t;!function(o){o.projectsListDataSourceFactoryName="projectsListGridDataSourceFactory",o.projectsModule.factory(o.projectsListDataSourceFactoryName,["$http",e.Common.Services.Api.apiServiceName,e.Common.Services.ServerConfig.serverConfigServiceName,function(e,o,s){return new t(e,o,s)}]);var t=function(){function e(e,o,t){this.$http=e,this.publicApi=o,this.serverConfig=t}return e.prototype.getProjectsList=function(){return new s(this.$http,this.publicApi,this.serverConfig)},e}();o.ProjectsListGridDataSourceFactory=t;var s=function(e){function o(o,t,s){e.call(this),this.isLoading=!1,this.$http=o,this.publicApi=t,this.serverConfig=s}return __extends(o,e),o.prototype.fetchItems=function(e,o,t){var s=this,a={offset:this.offset,limit:this.limit,sortdir:this.sortDir,sortby:this.sortBy};a=angular.extend(a,e),this.isLoading=!0;var r=this.publicApi.ProjectsList.get(a,function(e){s.items=[];var t=e.Response.Items;s.totalCount=r.Response.TotalCount,s.offset=r.Response.Offset,s.limit=r.Response.Limit;for(var a=0;a<r.Response.Items.length;a++)s.items.push(t[a]);s.isLoading=!1,o&&o.apply(s,e)},function(){for(var e=[],o=0;o<arguments.length;o++)e[o-0]=arguments[o];s.isLoading=!1,t&&t.apply(s,e)});return this.items},o}(e.Common.Directives.TangGrid.GridDataSource);o.ProjectsListDataSource=s}(t=o.Projects||(o.Projects={}))}(o=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var o;!function(o){var t;!function(o){o.projectsListControllerName="bsProjectsListController",o.projectsModule.controller(o.projectsListControllerName,["$scope","$routeParams",e.Common.Services.ServerConfig.serverConfigServiceName,o.projectsListDataSourceFactoryName,e.Common.Services.ModalDialog.serviceName,e.Common.Services.Api.apiServiceName,e.Common.Services.siteNavigationServiceName,function(e,o,s,a,r,i,n){return new t(e,o,s,a,r,i,n)}]);var t=function(){function e(e,t,s,a,r,i,n){n.setCurrentLocation("projects");var l=a.getProjectsList();if(l.sortBy="DateCreated",e.selections=[],e.gridOptions={headers:[{displayName:"Name",field:"Name",sortable:!0,sortBy:"Name"},{displayName:"Size",field:"TotalSize",sortable:!0,sortBy:"TotalSize"},{displayName:"Last Updated",field:"DateModified",sortable:!0,sortBy:"DateModified"},{displayName:"Owner",field:"UserOwnedBy.Name",sortable:!0,sortBy:"UserOwnedBy"}],columns:[{field:"name",cellTemplate:o.Templates.projectsListGridName},{field:"TotalSize",cellTemplate:o.Templates.projectsListTotalSize},{field:"DateCreated",cellTemplate:o.Templates.projectsListGridDateCreated},{field:"UserOwnedBy.Name"}],gridDataSource:l,allowSelection:!0,multiSelection:!1,urlHistoryEnabled:!0},t.analysisId&&t.returnUrl){var c=t.analysisId;i.AppSession.get({Id:c},function(o){var t=o.Response,s=[];s.push(t);var a={masterTemplate:'<bs-trash-modal dialog-scope="dialogScope"></bs-trash-modal>'},i={resourceType:"appSession",selections:s,gridDataSource:e.gridOptions.gridDataSource};r.showModal(a,i)})}}return e}();o.ProjectsListController=t}(t=o.Projects||(o.Projects={}))}(o=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var o;!function(o){var t;!function(o){o.projectSamplesDataSourceFactoryName="projectSamplesDataSourceFactory",o.projectsModule.factory(o.projectSamplesDataSourceFactoryName,[e.Common.Services.Api.apiServiceName,function(e){return new t(e)}]);var t=function(){function e(e){this.publicApi=e}return e.prototype.getSamplesList=function(e){return new s(this.publicApi,e)},e}();o.ProjectSamplesDataSourceFactory=t;var s=function(o){function t(e,t){o.call(this),this.isLoading=!1,this.publicApi=e,this.projectId=t}return __extends(t,o),t.prototype.fetchItems=function(o,t,s){var a=this,r={Id:this.projectId,offset:this.offset,limit:this.limit,sortDir:this.sortDir,sortBy:this.sortBy,statuses:e.Common.Services.Api.ApiResourceStatus.COMPLETE};this.isLoading=!0;var i=this.publicApi.ProjectSamples.get(r,function(e){a.items=[];var o=e.Response.Items;a.totalCount=i.Response.TotalCount;for(var s=0;s<i.Response.Items.length;s++)a.items.push(o[s]);a.isLoading=!1,t&&t.apply(a,e)},function(){for(var e=[],o=0;o<arguments.length;o++)e[o-0]=arguments[o];a.isLoading=!1,s&&s.apply(a,e)});return this.items},t}(e.Common.Directives.TangGrid.GridDataSource);o.ProjectSamplesGridDataSource=s}(t=o.Projects||(o.Projects={}))}(o=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var o;!function(o){var t;!function(o){o.projectSamplesControllerName="bsProjectSamplesController",o.projectsModule.controller(o.projectSamplesControllerName,["$scope","$routeParams",o.projectSamplesDataSourceFactoryName,e.Common.Services.Api.apiServiceName,e.Common.Services.siteNavigationServiceName,function(e,o,s,a,r){return new t(e,o,s,a,r)}]);var t=function(){function t(t,s,a,r,i){i.setCurrentLocation("projects");var n=s.id,l=r.Project.get({Id:n},function(){t.project=l.Response});t.selections=[],t.gridOptions={headers:[{displayName:"Sample Id",field:"SampleId",sortable:!0,sortBy:"SampleId"},{displayName:"Date Created",field:"DateCreated",sortable:!0,sortBy:"DateCreated"},{displayName:"Read Length",field:"Read1",sortable:!0,sortBy:"Read1"},{displayName:"Origin",field:"ExperimentName",sortable:!0,sortBy:"ExperimentName"},{displayName:"Genome",field:"preferredBuild",sortable:!0,sortBy:"preferredBuild"},{displayName:"Size",field:"TotalSize",sortable:!0,sortBy:"TotalSize",thStyle:{"text-align":"right"}}],columns:[{field:"SampleId",cellTemplate:o.Templates.projectSamplesGridSampleId},{field:"DateCreated",cellTemplate:o.Templates.projectSamplesGridDateCreated},{field:"Read1",cellTemplate:o.Templates.projectSamplesGridReadLength},{field:"Origin",cellTemplate:o.Templates.projectSamplesGridOrigin},{field:"Genome",cellTemplate:o.Templates.projectSamplesGridGenome},{field:"TotalSize",cellTemplate:o.Templates.projectSamplesGridTotalSize}],gridDataSource:a.getSamplesList(n),allowSelection:!0,multiSelection:!0},t.gridOptions.gridDataSource.sortBy="Id",t.badgeData=new e.Common.Directives.TangGrid.GridSelectionCountHelper(t.gridOptions,t.selections)}return t}();o.ProjectSamplesController=t}(t=o.Projects||(o.Projects={}))}(o=e.Areas||(e.Areas={}))}(bs||(bs={}));
//# sourceMappingURL=bs.tang.projects.min.js.map
