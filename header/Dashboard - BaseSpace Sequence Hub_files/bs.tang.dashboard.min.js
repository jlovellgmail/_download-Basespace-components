var bs;!function(e){var t;!function(e){var t;!function(e){e.Templates={cmsCard:'<div class="bs-cms-card">        <div class="top">            <div class="status">{{ item.title }}</div>            <div class="cmsbadge {{ item.layout.attributes.cssClass }}">{{ item.layout.attributes.label }}</div>        </div>        <div class="bottom">            <div class="date">                {{ dateDisplay }}            </div>            <div class="update">                {{ item.content | charactersTruncate: 130 }}            </div>            <div ng-if="item.button" class="button-container">                <a ng-href="{{ item.button.href }}" target="_self" class="btn btn-primary bs-btn-primary btn-xs">{{ item.button.label }}</a>            </div>        </div>    </div>',notificationCard:'<div ng-if="!notification.IsArchived" ng-switch="notification.Category">        <bs-loader is-loading="isLoading"></bs-loader>        <div ng-switch-when="Sharing">            <div>                <div class="{\'dismissable\': notificationCardViewModel.dismissable\'">                    <div ng-click="!notificationCardViewModel.canNavigateToResource || openResource()" ng-class="{\'clickable\': notificationCardViewModel.canNavigateToResource}">                        <div class="top">                            <span class="bs-statusicon {{ notificationCardViewModel.statusIconClass }}"></span>                            <div class="status" ng-bind-html=" notificationCardViewModel.titleHtml"></div>                            <a ng-if="notificationCardViewModel.dismissable" ng-hide="isLoading" ng-click="onClickDismiss($event)" href="#" title="Dismiss"><div class="fa fa-close pull-right" style="padding:8px"></div></a>                        </div>                        <div class="bottom">                            <div class="date">{{ notification.DateCreated | twitterTime }}</div>                            <div class="update" ng-bind-html="notificationCardViewModel.messageHtml">                            </div>                            <a ng-if="notificationCardViewModel.dismissable" ng-show="isMobileView && !isLoading" ng-click="onClickDismiss($event)" href="#" title="Dismiss"><div class="fa fa-close pull-right"></div></a>                        </div>                        <div ng-if="notificationCardViewModel.showActionButtons" class="actions">                            <a class="btn btn-primary bs-btn-primary btn-xs" ng-href="/s/{{notification.Invite.Token}}">Accept</a>                            <button class="btn btn-primary bs-btn-primary btn-xs" type="button" ng-click="onClickDecline($event)">Decline</button>                        </div>                    </div>                </div>            </div>        </div>        <div ng-switch-default ng-if="!isLoading">            <p>Unknown notification category type: {{ notification.Category }}</p>        </div>    </div>',statusCard:'<div  ng-click="openResource()" class="clickable">        <div class="top">            <span class="bs-statusicon {{ item.Status | statusIconClass }}"></span>            <div class="status">{{item.Status}}</div>        </div>        <div class="bottom" ng-switch="resourceType">            <div ng-switch-when="run">                <div class="date">                    {{ item.DateModified | twitterTime }}                </div>                <div ng-if="isMobileView">                    <strong>{{item.Status}}</strong>                </div>                <div class="update">                    <a target="_self" ng-href="{{item.HrefBaseSpaceUI}}">                        {{ item.ExperimentName | charactersTruncate: 130 }}                    </a>                </div>            </div>            <div ng-switch-when="appsession">                <div class="date">                    {{ item.ModifiedOn | twitterTime }}                </div>                <div ng-if="isMobileView">                    <strong>{{item.Status}}</strong>                </div>                <div class="update">                    <a target="_self" ng-href="{{ { AppSession: item } | uiHref : \'appsession\' }}">                        {{item.Name | charactersTruncate: 130}}                    </a>                </div>            </div>        </div>    </div>',acceptShareDialog:'<p>{{ dialogScope.userName }} would like to share the following item with you:</p>    <p><strong><span class="icomoon {{ dialogScope.iconClass }}"></span> {{ dialogScope.resourceName }}</strong> ({{ dialogScope.resourceSize | bytes }})</p>    <bs-share-to-user-context selected-share-context="dialogScope.selectedShareContext"></bs-share-to-user-context>    <p ng-if="dialogScope.errorText" class="alert alert-danger">{{ dialogScope.errorText }}</p>',transferAcceptanceDialog:'<p>{{ dialogScope.userName }} is transferring ownership of the following to you:</p>    <p><strong><span class="icomoon {{ dialogScope.iconClass }}"></span> {{ dialogScope.resourceName }}</strong> ({{ dialogScope.resourceSize | bytes }})</p>    <bs-share-to-user-context selected-share-context="dialogScope.selectedShareContext"></bs-share-to-user-context>    <p>Click Accept to become the owner of this data. By clicking accept, the data becomes yours and is part of your account.    You must comply with the <a target="_blank" href="/agreements/current/details?category=USER">BaseSpace User Terms of Use.</a></p>    <p ng-if="dialogScope.errorText" class="alert alert-danger">{{ dialogScope.errorText }}</p>',dashboardOnsite:'<div class="header"></div>    <div class="bs-dashboard container-fluid">        <div class="dashboard-container onsite">            <div class="col-two">                <bs-carousel header="Notifications" resource-type="notification" request-params="{ sortBy: \'DateModified\', sortDir: \'Desc\', categories: [\'Sharing\'] }">                    <!-- TODO add sort-by="DateCreated" -->                </bs-carousel>                <bs-carousel header="Latest Runs" resource-type="run" request-params="{ sortBy: \'DateModified\', sortDir: \'Desc\' }">                </bs-carousel>                <bs-carousel header="Latest Analyses" resource-type="appsession" request-params="{ sortBy: \'ModifiedOn\', sortDir: \'Desc\' }">                </bs-carousel>            </div>            <div class="col-one">                <bs-storage></bs-storage>                <bs-developers-onsite></bs-developers-onsite>                <bs-news-feed-onsite return-count="5"></bs-news-feed-onsite>            </div>        </div>    </div>',dashboard:'<div class="bs-dashboard container-fluid">        <div class="dashboard-container">            <div class="header row">                <div class="title-and-breadcrumb-container">                    <h1 class="page-title">Dashboard</h1>                </div>                <bs-context-switch></bs-context-switch>            </div>            <div class="row">                <div class="col-two">                    <bs-carousel header="Notifications" resource-type="notification" request-params="{ sortBy: \'DateModified\', sortDir: \'Desc\', categories: [\'Sharing\'] }">                        <!-- TODO add sort-by="DateCreated" -->                    </bs-carousel>                    <bs-carousel header="Latest Runs" resource-type="run" request-params="{ sortBy: \'DateModified\', sortDir: \'Desc\' }">                    </bs-carousel>                    <bs-carousel header="Latest Analyses" resource-type="appsession" request-params="{ sortBy: \'ModifiedOn\', sortDir: \'Desc\' }">                    </bs-carousel>                </div>                <div class="col-one">                    <bs-context-switch ng-if="false"></bs-context-switch>                    <bs-i-credit></bs-i-credit>                    <bs-storage></bs-storage>                    <bs-developers></bs-developers>                    <bs-news-feed return-count="5"></bs-news-feed>                </div>            </div>        </div>    </div>',carousel:'<div ng-class="{\'mobile\' : isMobileView}">        <div class="bs-widget-with-inner-carousel">            <div class="carousel">                 <bs-loader is-loading="isLoading"></bs-loader>                <div class="header">                    <div class="title">{{header}}</div><div ng-if="uiHrefAll" class="viewall"><a ng-href="{{uiHrefAll}}" target="_self">All {{displayNamePlural}} >></a></div>                </div>                <div ng-hide="isMobileView" class="previous-page-btn" ng-click="offset == 0 || onShiftOffset(limit*-1)">                    <div class="bs-arrow" ng-class="{ \'disabled\' : offset == 0 }"></div>                </div>                <div class="carousel-content">                    <ul class="bs-notification-card" ng-hide="isEmpty">                        <li class="repeated-item" ng-repeat="item in items">                            <span ng-switch="resourceType">                                <span ng-switch-when="notification">                                    <span ng-switch="item.type">                                        <span ng-switch-when="1">                                            <bs-cms-card item="item.data"></bs-cms-card>                                        </span>                                        <span ng-switch-when="2">                                            <bs-notification-card notification="item.data" is-mobile-view="isMobileView" on-item-removed-callback="onItemRemovedCallback($index)"></bs-notification-card>                                        </span>                                    </span>                                </span>                                <span ng-switch-default>                                    <bs-status-card item="item.data" resource-type="resourceType" is-mobile-view="isMobileView"></bs-status-card>                                </span>                            </span>                        </li>                    </ul>                    <ul class="bs-notification-card" ng-show="isEmpty">                        <li class="empty">                            <div class="top">                                <span class="bs-statusicon no-records"></span>                                <div class="status">None at this time</div>                            </div>                            <div class="bottom" ng-switch="resourceType">                                <div ng-switch-when="notification">                                    Invitations to shared projects, along with other notifications and alerts will appear here.                                </div>                                <div ng-switch-when="run">                                    Your latest sequencing runs and their statuses will appear here.                                </div>                                <div ng-switch-when="appsession">                                    Your latest analyses from apps and their statuses will appear here. Check out our <a href="/datacentral">Public Data</a> section for samples you can get started with.                                </div>                            </div>                        </li>                    </ul>                </div>                <div ng-hide="isMobileView" class="next-page-btn" ng-click="isOutOfItems || onShiftOffset(limit)">                    <div class="bs-arrow right" ng-class="{ \'disabled\' : isOutOfItems }"></div>                </div>            </div>        </div>    </div>',developersOnsite:'<div class="bs-widget bs-developers-onsite">                <div class="title">Developers</div>            <div class="text">            Start building the next generation of sequencing apps on BaseSpace.<br/>            An internet connection is required to access this content.        </div>        <a style="margin-top:3px" href="{{devportalWebsiteBaseUrl}}" class="btn btn-primary bs-btn-primary btn-xs">Details</a>    </div>',developers:'<div class="bs-widget bs-developers">                <div class="title">Developers</div>            <div class="text">            Start building the next generation of BaseSpace sequencing apps.        </div>        <a href="{{devportalWebsiteBaseUrl}}" class="btn btn-primary bs-btn-primary btn-xs">Details</a>    </div>',newsFeed:'<div class="bs-widget">        <div class="title">Newsfeed</div>        <div class="bs-newsfeed" ng-hide="newsfeedRequestError">            <div>                <ul>                    <li ng-repeat="feed in newsFeedItems | limitTo: 4">                        <div>                            <a href="{{feed.Link}}">{{feed.Title}}</a>                        </div>                        <div class="desc" ng-bind-html="feed.Description | charactersTruncate: 80"></div>                        <div class="date">{{feed.PublishDate | twitterTime}}</div>                    </li>                </ul>                <div class="readMore">                    <a href="http://blog.basespace.illumina.com">Read more from the BaseSpace blog</a>                </div>            </div>        </div>        <div class="title" ng-show="newsfeedRequestError">            Unavailable        </div>    </div>',newsFeedOnsite:'<div class="bs-widget">        <div class="title">Newsfeed</div>        <div class="bs-newsfeed" ng-hide="newsfeedRequestError">            <div>                <ul>                    <li ng-repeat="feed in newsFeedItems | limitTo: 4">                        <div>                            <a href="{{feed.link}}">{{feed.title}}</a>                        </div>                        <div class="desc" ng-bind-html="feed.description | charactersTruncate: 80"></div>                        <div class="date">{{feed.pubDate | twitterTime}}</div>                    </li>                </ul>                <div class="readMore">                    <a href="http://blog.basespace.illumina.com">Read more from the BaseSpace blog</a>                </div>            </div>        </div>        <div class="text" ng-show="newsfeedRequestError">            Content currently unavailable. <br/>An internet connection is required to view this content.        </div>    </div>',storage:'<div class="bs-widget" style="height:150px">        <bs-loader is-loading="isLoading"></bs-loader>        <div ng-hide="isLoading">            <div class="title">Storage</div>            <div class="bs-storage" ng-show="storageStats">                <a href="/settings/storage" target="_self" class="btn btn-primary bs-btn-primary btn-xs">Details</a>                <bs-storage-totals-chart show-legend="false" storage-stats="storageStats" is-loading="isLoading"></bs-storage-totals-chart>            </div>            <div class="title" ng-hide="storageStats">                Unavailable            </div>        </div>    </div>',iCredit:'<div class="bs-widget bs-iCredit">        <bs-loader is-loading="isLoading"></bs-loader>        <div ng-hide="isLoading">            <div class="title">                iCredits            </div>            <div ng-show="isStoreAvailable">                <div ng-hide="storeRequestError">                    <div ng-class="{\'number orange\': iCredits == 0, \'number green\': iCredits > 0}">                        {{ iCredits | number}}                    </div>                    <a ng-href="{{storeWebsiteBaseUrl}}/myAccount/wallet" class="btn btn-primary bs-btn-primary btn-xs">Add More</a>                </div>                <div ng-show="storeRequestError" class="pull-left">                    <div class="text">                        Unavailable                    </div>                </div>            </div>            <div ng-hide="isStoreAvailable">                <div>Store Unavailable</div>            </div>        </div>    </div>'}}(t=e.Dashboard||(e.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(t){var i;!function(t){t.moduleName="bs.Areas.Dashboard",t.dashboardModule=angular.module(t.moduleName,["ngAnimate","ngRoute","matchmedia-ng",e.Common.commonModuleName]),t.dashboardModule.config(["$routeProvider","$locationProvider",e.Common.Services.ServerConfig.serverConfigProviderName,function(e,i,s){var a=s.serverConfig.isOnSite?t.Templates.dashboardOnsite:t.Templates.dashboard;e.when("/dashboard",{template:a,controller:t.dashboardControllerName}).when("/s/:token",{template:a,controller:t.dashboardShareControllerName}).when("/dashboard/s/:token",{template:a,controller:t.dashboardShareControllerName}).when("/g/:token",{template:a,controller:t.dashboardShareControllerName}).when("/dashboard/g/:token",{template:a,controller:t.dashboardShareControllerName}).otherwise({template:a,controller:t.dashboardControllerName});var r={enabled:!0,requireBase:!0};i.html5Mode(r).hashPrefix("!")}])}(i=t.Dashboard||(t.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(t){var i;!function(t){var i;!function(i){var s;!function(i){i.carouselServiceName="carouselService",i.cmsDashboardContentGroupName="dashboard-alerts",i.cmsResourceName="cms",i.additionalItemCacheMultipler=3,i.MAX_ITEMS_ALLOWED=500,function(e){e[e.Cached=0]="Cached",e[e.LoadMore=1]="LoadMore",e[e.LoadMoreAndResolve=2]="LoadMoreAndResolve"}(i.CachedItemsStates||(i.CachedItemsStates={}));var s=i.CachedItemsStates;t.dashboardModule.service(i.carouselServiceName,["$q","$cacheFactory",e.Common.Services.BsResourceDictionary.serviceName,e.Common.Services.Api.apiServiceName,function(e,t,i,s){return new a(e,t,i,s)}]);var a=function(){function e(e,a,r,o){var n=this;this.getItems=function(e){var t=n.$q.defer();return n.limit=e.limit*i.additionalItemCacheMultipler,n.offset=e.offset*i.additionalItemCacheMultipler,n.loadAllItems(e).then(function(e){t.resolve(e)}),t.promise},this.onItemRemove=function(e,t){var s=n.cache.get(t),a=n.cache.get(i.cmsResourceName);a&&(e-=a.totalCount),s.items.splice(e,1),s.totalCount=s.totalCount-1,n.cache.put(t,s)},this.setAllResourceUrl=function(e){var t=n.resourceDictionary[e.resourceType];e.uiHrefAll=t.uiHrefAccessorAll(),e.displayNamePlural=t.displayNamePlural},this.loadAllItems=function(e){var t=n.$q.defer(),i=n.loadCmsItems(e);n.adjustedItemOffset=e.offset,void 0!==n.totalCmsItemCount&&(n.adjustedItemOffset=n.adjustedItemOffset-n.totalCmsItemCount,n.adjustedItemOffset<0&&(n.adjustedItemOffset=0)),n.requestParams.offset=n.adjustedItemOffset;var s=n.loadItems(e);return n.$q.all([i,s]).then(function(i){n.cmsCarouselItems=i[0],n.carouselItems=i[1],n.setReturnItems(e),t.resolve(n.returnItems)}),t.promise},this.setReturnItems=function(e){n.returnItems={items:[],totalCount:0},n.returnItems.items=n.cmsCarouselItems.items.slice(0,e.limit);var t=n.carouselItems.items.slice(0,e.limit-n.returnItems.items.length);n.returnItems.items=n.returnItems.items.concat(t),n.returnItems.totalCount=n.cmsCarouselItems.totalCount+n.carouselItems.totalCount},this.resolveItemsFromCache=function(e,t,i,a){n.cachedItemState=s.LoadMoreAndResolve;var r=n.cache.get(a);if(null!==r&&void 0!==r){var o={items:r.items.slice(i,i+t),totalCount:r.totalCount},c=r.items.length<r.totalCount;if(0===o.items.length&&c)return;n.cachedItemState=s.Cached;var d=c&&r.items.length<n.offset+n.limit;d&&(n.cachedItemState=s.LoadMore),e.resolve(o)}},this.setItemsFromApi=function(e,s,a,r,o){for(var c={items:[],totalCount:0},d=0;d<s.length;++d){var l={type:t.Components.Widgets.Carousel.CarouselItemTypes[r.toUpperCase()],data:s[d]};c.items.push(l)}c.totalCount=a>i.MAX_ITEMS_ALLOWED?i.MAX_ITEMS_ALLOWED:a;var u=n.cache.get(r);null===u||void 0===u?n.cache.put(r,c):(u.items=u.items.concat(c.items),u.totalCount=c.totalCount,n.cache.put(r,u)),o&&e.resolve(c)},this.loadItems=function(e){var t=n.resourceDictionary[e.resourceType],i=n.$q.defer();if(t){var a=e.offset;"notification"===e.resourceType&&(a=n.adjustedItemOffset),n.resolveItemsFromCache(i,e.limit,a,e.resourceType),n.cachedItemState!==s.Cached&&n.callApi(t).then(function(t){n.setItemsFromApi(i,t.Response.Items,t.Response.TotalCount,e.resourceType,n.cachedItemState===s.LoadMoreAndResolve)})}else i.resolve(n.apiError("Unknown resource type: '"+e.resourceType+"'"));return i.promise},this.loadCmsItems=function(e){var t=n.$q.defer();return n.isCmsGroupPresent?("notification"!==e.resourceType?t.resolve(n.apiError("No cms cards for this resource type")):(n.resolveItemsFromCache(t,e.limit,e.offset,i.cmsResourceName),n.cachedItemState!==s.Cached&&n.callCmsApi().then(function(e){for(var a=[],r=0;r<e.Response.Items.length;++r)a.push(angular.fromJson(e.Response.Items[r].Content));n.totalCmsItemCount=e.Response.TotalCount,n.setItemsFromApi(t,a,e.Response.TotalCount,i.cmsResourceName,n.cachedItemState===s.LoadMoreAndResolve)},function(e){n.isCmsGroupPresent=!1,t.resolve(n.apiError(e))})),t.promise):(t.resolve(n.apiError("CMS Group "+i.cmsDashboardContentGroupName+" does not exist")),t.promise)},this.callApi=function(e){var t=n.$q.defer();return n.requestParams.offset=n.offset,n.requestParams.limit=n.limit,e.restResource.query(n.requestParams,function(e){t.resolve(e)},function(e){t.resolve(n.apiError(e))}).$promise},this.callCmsApi=function(){var e=n.$q.defer(),t={offset:n.offset,limit:n.limit,contentGroupName:i.cmsDashboardContentGroupName};return n.publicApi.CMS.getContentEntries(t,function(t){e.resolve(t)},function(t){e.resolve(n.apiError(t))}).$promise},this.apiError=function(e){return{items:[],totalCount:0,errorMessage:e}},this.resourceDictionary=r,this.publicApi=o,this.$q=e,this.cache=a(i.carouselServiceName),this.isCmsGroupPresent=!0}return e}();i.CarouselService=a}(s=i.CarouselService||(i.CarouselService={}))}(i=t.Services||(t.Services={}))}(i=t.Dashboard||(t.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(t){var i;!function(t){t.dashboardControllerName="bsDashboardController",t.dashboardModule.controller(t.dashboardControllerName,["$scope",e.Common.Services.ServerConfig.serverConfigServiceName,e.Common.Services.Api.apiServiceName,e.Common.Services.siteNavigationServiceName,function(e,t,s,a){return new i(e,t,s,a)}]);var i=function(){function e(e,t,i,s){s.setCurrentLocation("dashboard"),e.currentUserId=t.currentUserId}return e}();t.DashboardController=i}(i=t.Dashboard||(t.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(t){var i;!function(t){t.dashboardShareControllerName="bsDashboardShareController",t.invalidInviteHeader="Invalid Invite",t.invalidInviteBody="<div class='error' > We're sorry, but the current invitation is invalid or no longer active.</div>",t.dashboardModule.controller(t.dashboardShareControllerName,["$location","$scope","$routeParams","$filter",e.Common.Services.ServerConfig.serverConfigServiceName,e.Common.Services.Api.apiServiceName,e.Common.Services.ModalDialog.serviceName,e.Common.Services.BsResourceDictionary.serviceName,e.Common.Services.currentUserServiceName,e.Common.Services.siteNavigationServiceName,function(e,t,s,a,r,o,n,c,d,l){return new i(e,t,s,a,r,o,n,c,d,l)}]);var i=function(){function e(e,i,s,a,r,o,n,c,d,l){var u=this;this.displayAcceptModal=function(e,i){var s="OWN"===u.invite.Permission;u.currentUserService.getCurrentUser(!1).then(function(e){i.selectedShareContext=e}),u.modalDialog.bootstrapConfirm({headerTemplate:s?"<h4>Transfer Ownership":"<h4>Share "+e.displayNameSingular+"</h4>",bodyTemplate:s?t.Templates.transferAcceptanceDialog:t.Templates.acceptShareDialog,dialogScope:i,confirmLabel:"Accept",cancelLabel:"Cancel",onBeforeConfirmAsync:function(){var e=u.publicApi.Invite.save({Id:u.invite.Id,action:"accept",InvitedUserId:i.selectedShareContext.Id}).$promise;return e.then(function(e){window.location.href="/dashboard"},function(e){i.errorText=409==e.status&&i.selectedShareContext?"The selected account already has access to this resource.":e.data.ResponseStatus.Message}),e},onBeforeCancel:function(){u.$location.path("/dashboard")}})},this.displayInvalidTokenModal=function(){u.modalDialog.bootstrapConfirm({headerTemplate:t.invalidInviteHeader,bodyTemplate:t.invalidInviteBody,confirmLabel:"Close",showCancelButton:!1})["finally"](function(){u.$location.path("/dashboard")})},l.setCurrentLocation("dashboard"),this.$location=e,this.modalDialog=n,this.$routeParams=s,this.$filter=a,this.publicApi=o,this.resourceDictionary=c,this.currentUserService=d;var m;o.InviteList.query({Token:s.token},function(e){if(u.invite=e.Response.Items[0],"pending"!==u.invite.Status.toLowerCase())return void u.displayInvalidTokenModal();var t=u.invite.References[0],i=t.Type.toLowerCase(),s=u.resourceDictionary[i],a=u.$filter("runInstrumentIcon");s&&(m={userName:u.invite.UserCreatedBy.Name,resourceName:t.Content[s.namePropertyName],resourceSize:t.Content.TotalSize,iconClass:"run"===i?a(t.Content):"project",resourceHref:"run"===i?"/runs/"+t.Content.Id:"projects/"+t.Content.Id,selectedShareContext:null,errorText:""},s.restResource.get({Id:u.invite.References[0].Content.Id},function(e){u.currentUserService.getCurrentUser(!1).then(function(e){u.displayAcceptModal(s,m)})},function(){u.displayAcceptModal(s,m)}))},function(){u.displayInvalidTokenModal()})}return e}();t.DashboardShareController=i}(i=t.Dashboard||(t.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},bs;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e){this.statusIconClass=e.statusIconClass,this.titleHtml=e.titleHtml,this.messageHtml=e.messageHtml,this.dismissable=e.dismissable,this.canNavigateToResource=e.canNavigateToResource,this.showActionButtons=e.showActionButtons}return e}();e.NotificationCardViewModelBase=t;var i=function(e){function t(t,i,s,a,r){e.call(this,{statusIconClass:"pending",titleHtml:"Share pending",messageHtml:"\n                    "+t.Invite.UserCreatedBy.Name+" invited you to the <span> "+i+' <strong title="'+s+'"> '+r("charactersTruncate")(s,18,!0)+"</strong> </span>\n                ",dismissable:!1,canNavigateToResource:!1,showActionButtons:!0})}return __extends(t,e),t}(t);e.NotificationCardViewModel_Pending_Share_ToMe=i;var s=function(e){function t(t,i,s,a,r){e.call(this,{statusIconClass:"accepted",titleHtml:"Share accepted",messageHtml:"\n                    You accepted "+t.Invite.UserCreatedBy.Name+"'s invitation to the <span> "+i+' <a title="'+s+'" ng-href="'+a+'" target="_self">'+r("charactersTruncate")(s,65,!0)+"</a</span>\n                ",dismissable:!0,canNavigateToResource:!0,showActionButtons:!1})}return __extends(t,e),t}(t);e.NotificationCardViewModel_Accepted_Share_ToMe=s;var a=function(e){function t(t,i,s,a,r){e.call(this,{statusIconClass:"pending",titleHtml:"Transfer owner",messageHtml:"\n                    "+t.Invite.UserCreatedBy.Name+" invited you to become owner of the <span> "+i+' <strong title="'+s+'"> '+r("charactersTruncate")(s,18,!0)+"</strong> </span>\n                ",dismissable:!1,canNavigateToResource:!1,showActionButtons:!0})}return __extends(t,e),t}(t);e.NotificationCardViewModel_Pending_Transfer_ToMe=a;var r=function(e){function t(t,i,s,a,r){e.call(this,{statusIconClass:"accepted",titleHtml:"Transfer accepted",messageHtml:"\n                    You accepted "+t.Invite.UserCreatedBy.Name+"'s invitation to become owner of the <span> "+i+' <a title="'+s+'" ng-href="'+a+'" target="_self">'+r("charactersTruncate")(s,65,!0)+"</a></span>\n                ",dismissable:!0,canNavigateToResource:!0,showActionButtons:!1})}return __extends(t,e),t}(t);e.NotificationCardViewModel_Accepted_Transfer_ToMe=r;var o=function(e){function t(t,i,s,a,r){e.call(this,{statusIconClass:"pending",titleHtml:"Share pending",messageHtml:"\n                    You invited "+t.Invite.UserInvited.Name+" to the <span> "+i+' <a title="'+s+'" ng-href="'+a+'" target="_self>'+r("charactersTruncate")(s,18,!0)+"</a> </span>\n                ",dismissable:!1,canNavigateToResource:!0,showActionButtons:!1})}return __extends(t,e),t}(t);e.NotificationCardViewModel_Pending_Share_FromMe=o;var n=function(e){function t(t,i,s,a,r){e.call(this,{statusIconClass:"accepted",titleHtml:"Share accepted",messageHtml:"\n                    "+t.Invite.UserInvited.Name+" accepted your invitation to the <span> "+i+' <a title="'+s+'" ng-href="'+a+'" target="_self">'+r("charactersTruncate")(s,65,!0)+"</a> </span>\n                ",dismissable:!0,canNavigateToResource:!0,showActionButtons:!1})}return __extends(t,e),t}(t);e.NotificationCardViewModel_Accepted_Share_FromMe=n;var c=function(e){function t(t,i,s,a,r){e.call(this,{statusIconClass:"pending",titleHtml:"Transfer owner",messageHtml:"\n                    You invited "+t.Invite.UserInvited.Name+" to become owner of the <span> "+i+' <a title="'+s+'}" ng-href="'+a+'}" target="_self">'+r("charactersTruncate")(s,18,!0)+"</a> </span>\n                ",dismissable:!1,canNavigateToResource:!0,showActionButtons:!1})}return __extends(t,e),t}(t);e.NotificationCardViewModel_Pending_Transfer_FromMe=c;var d=function(e){function t(t,i,s,a,r){e.call(this,{statusIconClass:"accepted",titleHtml:"Transfer accepted",messageHtml:"\n                    "+t.Invite.UserInvited.Name+" accepted your invitation to become owner of the <span> "+i+' <strong title="'+s+'">'+r("charactersTruncate")(s,65,!0)+" </strong> </span>\n                ",dismissable:!0,canNavigateToResource:!1,showActionButtons:!1})}return __extends(t,e),t}(t);e.NotificationCardViewModel_Accepted_Transfer_FromMe=d;var l=function(e){function t(t,i,s,a,r){e.call(this,{statusIconClass:"accepted",titleHtml:"Share accepted",messageHtml:"\n                    "+t.SenderUser.Name+" accepted your invitation to the <span> "+i+' <a title="'+s+'" ng-href="'+a+'" target="_self">'+r("charactersTruncate")(s,18,!0)+" </a> </span>\n                ",dismissable:!0,canNavigateToResource:!0,showActionButtons:!1})}return __extends(t,e),t}(t);e.NotificationCardViewModel_Accepted_ShareLink_FromMe=l;var u=function(e){function t(t,i,s,a,r){e.call(this,{statusIconClass:"accepted",titleHtml:"Share accepted",messageHtml:"\n                    You accepted "+t.Invite.UserCreatedBy.Name+"'s invitation to the <span> "+i+' <a title="'+s+'" ng-href="'+a+'" target="_self">'+r("charactersTruncate")(s,18,!0)+" </a> </span>\n                ",dismissable:!0,canNavigateToResource:!0,showActionButtons:!1})}return __extends(t,e),t}(t);e.NotificationCardViewModel_Accepted_ShareLink_ToMe=u;var m=function(e){function t(t,i,s,a,r){e.call(this,{statusIconClass:"",titleHtml:"",messageHtml:"\n                    Unknown Status: "+t.SubCategory+"\n                ",dismissable:!0,canNavigateToResource:!1,showActionButtons:!1})}return __extends(t,e),t}(t);e.NotificationCardViewModel_Error=m}(t=e.Cards||(e.Cards={}))}(t=e.Components||(e.Components={}))}(t=e.Dashboard||(e.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(t){var i;!function(t){var i;!function(i){var s;!function(i){i.serviceName="bsNotificationCard";var s=function(){function t(e,t){this.currentUserService=e,this.$filter=t}return t.prototype.getTemplateProperties=function(e,t,s,a){var r,o=this;return this.currentUserService.getCurrentUser().then(function(n){var c=e.Invite.UserInvited?e.Invite.UserInvited.Id===n.Id:null,d=e.Invite.UserCreatedBy.Id===n.Id,l="OWN"===e.Invite.Permission,u="Pending"===e.Invite.Status,m="Accepted"===e.Invite.Status,v=e.Invite.IsMultiUser;return r=u&&!l&&c&&!v?new i.NotificationCardViewModel_Pending_Share_ToMe(e,t,s,a,o.$filter):m&&!l&&c&&!v?new i.NotificationCardViewModel_Accepted_Share_ToMe(e,t,s,a,o.$filter):u&&l&&c&&!v?new i.NotificationCardViewModel_Pending_Transfer_ToMe(e,t,s,a,o.$filter):m&&l&&c&&!v?new i.NotificationCardViewModel_Accepted_Transfer_ToMe(e,t,s,a,o.$filter):!u||l||c||v?!m||l||c||v?u&&l&&!c&&!v?new i.NotificationCardViewModel_Pending_Transfer_FromMe(e,t,s,a,o.$filter):m&&l&&!c&&!v?new i.NotificationCardViewModel_Accepted_Transfer_FromMe(e,t,s,a,o.$filter):v&&d?new i.NotificationCardViewModel_Accepted_ShareLink_FromMe(e,t,s,a,o.$filter):v&&!d?new i.NotificationCardViewModel_Accepted_ShareLink_ToMe(e,t,s,a,o.$filter):new i.NotificationCardViewModel_Error(e,t,s,a,o.$filter):new i.NotificationCardViewModel_Accepted_Share_FromMe(e,t,s,a,o.$filter):new i.NotificationCardViewModel_Pending_Share_FromMe(e,t,s,a,o.$filter);

})},t.$inject=[e.Common.Services.currentUserServiceName],t}();i.Service=s,t.dashboardModule.service(i.serviceName,[e.Common.Services.currentUserServiceName,"$filter",function(e,t){return new s(e,t)}])}(s=i.Cards||(i.Cards={}))}(i=t.Components||(t.Components={}))}(i=t.Dashboard||(t.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(t){var i;!function(t){var i;!function(i){var s;!function(i){i.notificationCardDirectiveName="bsNotificationCard",t.dashboardModule.directive(i.notificationCardDirectiveName,["$q","$location",e.Common.Services.Api.apiServiceName,e.Common.Services.BsResourceDictionary.serviceName,e.Common.Services.ModalDialog.serviceName,t.Components.Cards.serviceName,function(e,t,i,a,r,o){return new s(e,t,i,a,r,o)}]);var s=function(){function e(e,i,s,a,r,o){var n=this;this.scope={id:"@?",notification:"=?",isMobileView:"=?",onItemRemovedCallback:"&"},this.restrict="E",this.$q=e,this.api=s,this.modalDialog=r,this.notificationCardService=o,this.template=t.Templates.notificationCard,this.resourceDictionary=a,this.$location=i,this.controller=["$scope",function(e){if(e.isLoading=!1,e.currentUserId=s.serverConfig.currentUserId,e.onClickDecline=function(t){return n.decline(e,t)},e.onClickDismiss=function(t){return n.dismiss(e,t)},e.openResource=function(){return n.openResource(e)},!e.notification||!e.notification)throw e.id?"<bs-notification-card id='{id}'> not yet implemented.":"<bs-notification-card> error: 'id' or 'notification' attribute must be specified";n._onNotificationFetched(e),n.notificationCardService.getTemplateProperties(e.notification,e.resourceTypeDescription,e.resourceName,e.resourceHref).then(function(t){e.notificationCardViewModel=t})}]}return e.prototype.decline=function(e,t){var i=this;e.isLoading=!0;var s=this.api.Invite.save({Id:e.notification.Invite.Id,action:"decline"}).$promise;return s.then(function(){i.dismiss(e,t)["finally"](function(){return e.isLoading=!1})},function(){e.onItemRemovedCallback(e.index)})["finally"](function(){return e.isLoading=!1}),s},e.prototype.dismiss=function(e,t){e.isLoading=!0;var i=this.api.Notification["delete"]({Id:e.notification.Id}).$promise;return i.then(function(){e.notification.IsArchived=!0}),i["finally"](function(){e.isLoading=!1,e.onItemRemovedCallback(e.index)}),t&&(t.preventDefault(),t.stopPropagation()),i},e.prototype.openResource=function(e){window.location.href=e.resourceHref},e.prototype._onNotificationFetched=function(e){e.isLoading=!1,e.notification.Reference&&this._setResource(e)},e.prototype._setResource=function(e){var t=e.notification.Reference,i=t.Type.toLowerCase(),s=this.resourceDictionary[i];if(!s)throw"Unknown resource type: '"+i+"'";e.resourceName=t.Content[s.namePropertyName];var a={};a[s.searchObjectName]=t.Content,e.resourceHref=s.uiHrefAccessor(a),e.resourceTypeDescription=s.displayNameSingular},e.prototype._displayInvalidInviteModal=function(){var e=this;this.modalDialog.bootstrapConfirm({headerTemplate:t.invalidInviteHeader,bodyTemplate:t.invalidInviteBody,confirmLabel:"Close",showCancelButton:!1})["finally"](function(){e.$location.path("/dashboard")})},e}();i.NotificationCardDirective=s}(s=i.Cards||(i.Cards={}))}(i=t.Components||(t.Components={}))}(i=t.Dashboard||(t.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){var i;!function(t){t.cmsCardDirectiveName="bsCmsCard",e.dashboardModule.directive(t.cmsCardDirectiveName,["$filter",function(e){return new i(e)}]);var i=function(){function t(t){this.scope={item:"=?",resourceType:"=?",isMobileView:"=?"},this.restrict="E",this.template=e.Templates.cmsCard,this.controller=["$scope",function(e){var i=new Date(e.item.date);e.dateDisplay=isNaN(i.getTime())?"Unknown date":t("twitterTime")(i.toISOString())}]}return t}();t.CmsCardDirective=i}(i=t.Cards||(t.Cards={}))}(t=e.Components||(e.Components={}))}(t=e.Dashboard||(e.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(t){var i;!function(t){var i;!function(i){var s;!function(i){var s;!function(i){i.carouselDirectiveName="bsCarousel",i.mediaMatchDictionary=[{limit:6,media:"(max-width:994px)",mobileView:!0},{limit:2,media:"(max-width:1254px) and (min-width:994px)",mobileView:!1},{limit:3,media:"(max-width:1514px) and (min-width:1254px)",mobileView:!1},{limit:4,media:"(max-width:1774px) and (min-width:1514px)",mobileView:!1},{limit:5,media:"(max-width:2034px) and (min-width:1774px)",mobileView:!1},{limit:6,media:"(min-width:2034px)",mobileView:!1}],t.dashboardModule.directive(i.carouselDirectiveName,["$timeout","$q","matchmedia",t.Services.CarouselService.carouselServiceName,function(e,t,i,a){return new s(e,t,i,a)}]);var s=function(){function t(t,s,a,r){var o=this;this.template=e.Areas.Dashboard.Templates.carousel,this.normalizeMediaQuery=function(e){return e.replace("all and ","").replace(/: /g,":")},this.runTransition=function(){o.$timeout(function(){var e=o.content.hasClass("next-page")?"previous-page":"next-page";o.clone.attr("class","carousel-content "+e+" clone"),o.content.attr("class","carousel-content current-page"),o.$timeout(function(){o.clone.remove(),o.content.attr("class","carousel-content"),o.isTransitioning=!1},400)},1)},this.restrict="E",this.scope={header:"@?",resourceType:"@",requestParams:"=?"},this.$timeout=t,this.$q=s,this.controller=["$element","$scope",function(e,t){t.offset=0,t.limit=0,t.matchmedia=a,r.setAllResourceUrl(t),t.onShiftOffset=function(i){if(!o.isTransitioning){o.isTransitioning=!0,t.offset=t.offset+i,t.offset<0&&(t.offset=0);var s=0>i?"previous-page":"next-page";o.content=e.find(".carousel-content"),o.clone=o.content.clone(),o.content.hide().before(o.clone),o.$timeout(function(){o.content.show(),o.clone.attr("class","carousel-content current-page clone"),o.content.attr("class","carousel-content "+s),t.loadItems(!0)},100)}},t.onItemRemovedCallback=function(e){if(r.onItemRemove(t.offset+e,t.resourceType),t.items.splice(e,1),t.items.length>0||t.offset>0){var i=!0;0===t.items.length&&(t.offset=t.offset-t.limit,i=!1),t.loadItems(!1,i)}else t.isEmpty=!0},t.loadItems=function(e,i){void 0===i&&(i=!1),t.isLoading=!0,r.requestParams=angular.copy(t.requestParams),r.getItems(t).then(function(s){t.totalCount=s.totalCount,t.isOutOfItems=t.offset+t.limit>=t.totalCount,t.isLoading=!1,i?t.limit===s.items.length&&t.items.push(s.items.pop()):t.items=s.items,t.isEmpty=0===t.items.length,e&&o.runTransition()})},t.setupMediaStops=function(){for(var e=0;e<i.mediaMatchDictionary.length;++e)t.matchmedia.on(i.mediaMatchDictionary[e].media,function(e){if(e.matches){var s=_.find(i.mediaMatchDictionary,function(t){return t.media===o.normalizeMediaQuery(e.media)});t.isMobileView=s.mobileView,s.limit<t.limit&&t.items.splice(s.limit,t.items.length),t.limit=s.limit,t.loadItems(!1)}})},t.setupMediaStops()}]}return t}();i.CarouselDirective=s}(s=i.Carousel||(i.Carousel={}))}(s=i.Widgets||(i.Widgets={}))}(i=t.Components||(t.Components={}))}(i=t.Dashboard||(t.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){!function(e){e[e.CMS=1]="CMS",e[e.NOTIFICATION=2]="NOTIFICATION",e[e.RUN=3]="RUN",e[e.APPSESSION=4]="APPSESSION"}(e.CarouselItemTypes||(e.CarouselItemTypes={}));e.CarouselItemTypes}(t=e.Carousel||(e.Carousel={}))}(t=e.Widgets||(e.Widgets={}))}(t=e.Components||(e.Components={}))}(t=e.Dashboard||(e.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(t){var i;!function(t){var i;!function(i){var s;!function(i){var s;!function(i){i.iCreditDirectiveName="bsICredit",t.dashboardModule.directive(i.iCreditDirectiveName,[e.Common.Services.currentUserServiceName,e.Common.Services.ServerConfig.serverConfigServiceName,function(e,t){return new s(e,t)}]);var s=function(){function t(t,i){var s=this;this.restrict="E",this.scope={control:"="},this.template=e.Areas.Dashboard.Templates.iCredit,this.currentUserService=t,this.serverConfig=i,this.controller=["$scope",function(e){e.isStoreAvailable=s.serverConfig.isStoreAvailable,e.storeRequestError=!1,e.iCredits=0,e.storeWebsiteBaseUrl=s.serverConfig.storeWebsiteBaseUrl,e.isLoading=!0,e.getICredits=function(){s.currentUserService.getCurrentUser(!0).then(function(t){null===t.StoreInfo&&(e.storeRequestError=!0),e.iCredits=t.StoreInfo?t.StoreInfo.ICreditBalance:0},function(t){e.storeRequestError=!0})["finally"](function(){e.isLoading=!1})},e.getICredits()}]}return t}();i.iCreditDirective=s}(s=i.iCredit||(i.iCredit={}))}(s=i.Widgets||(i.Widgets={}))}(i=t.Components||(t.Components={}))}(i=t.Dashboard||(t.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(t){var i;!function(t){var i;!function(i){var s;!function(i){var s;!function(i){i.storageDirectiveName="bsStorage",t.dashboardModule.directive(i.storageDirectiveName,function(){return new s});var s=function(){function t(){this.template=e.Areas.Dashboard.Templates.storage,this.restrict="E",this.scope={control:"="},this.controller=["$scope",function(e){e.isLoading=!0}]}return t}();i.StorageDirective=s}(s=i.Storage||(i.Storage={}))}(s=i.Widgets||(i.Widgets={}))}(i=t.Components||(t.Components={}))}(i=t.Dashboard||(t.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(t){var i;!function(t){var i;!function(i){var s;!function(i){var s;!function(i){i.developersDirectiveName="bsDevelopers",t.dashboardModule.directive(i.developersDirectiveName,[e.Common.Services.ServerConfig.serverConfigServiceName,function(e){return new s(e)}]);var s=function(){function e(e){var i=this;this.template=t.Templates.developers,this.restrict="E",this.scope={control:"="},this.serverConfig=e,this.controller=["$scope",function(e){e.devportalWebsiteBaseUrl=i.serverConfig.devportalWebsiteBaseUrl}]}return e}();i.DevelopersDirective=s}(s=i.Developers||(i.Developers={}))}(s=i.Widgets||(i.Widgets={}))}(i=t.Components||(t.Components={}))}(i=t.Dashboard||(t.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(t){var i;!function(t){var i;!function(i){var s;!function(i){var s;!function(s){s.developersDirectiveName="bsDevelopersOnsite",t.dashboardModule.directive(s.developersDirectiveName,[e.Common.Services.ServerConfig.serverConfigServiceName,function(e){return new a(e)}]);var a=function(e){function i(){e.apply(this,arguments),this.template=t.Templates.developersOnsite}return __extends(i,e),i}(i.Developers.DevelopersDirective);s.DevelopersDirective=a}(s=i.DevelopersOnsite||(i.DevelopersOnsite={}))}(s=i.Widgets||(i.Widgets={}))}(i=t.Components||(t.Components={}))}(i=t.Dashboard||(t.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(t){var i;!function(t){var i;!function(i){var s;!function(i){var s;!function(i){i.newsfeedDirectiveName="bsNewsFeed",t.dashboardModule.directive(i.newsfeedDirectiveName,function(){return new s});var s=function(){function i(){this.template=t.Templates.newsFeed,this.restrict="E",this.scope={control:"=",returnCount:"="},this.controller=["$scope","$resource",e.Common.Services.Api.NewsFeed.serviceName,function(e,t,i){e.getNewsFeedItems=function(){e.newsfeedRequestError=!1,i.query().then(function(t){e.newsFeedItems=t.Items,null==t.Items&&(e.newsfeedRequestError=!0)},function(t){e.newsfeedRequestError=!0})},e.getNewsFeedItems()}]}return i}();i.NewsFeedDirective=s}(s=i.Newsfeed||(i.Newsfeed={}))}(s=i.Widgets||(i.Widgets={}))}(i=t.Components||(t.Components={}))}(i=t.Dashboard||(t.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){var i;!function(t){var i;!function(i){i.newsfeedDirectiveName="bsNewsFeedOnsite",e.dashboardModule.directive(i.newsfeedDirectiveName,function(){return new s});var s=function(t){function i(){t.apply(this,arguments),this.template=e.Templates.newsFeedOnsite}return __extends(i,t),i}(t.Newsfeed.NewsFeedDirective);i.NewsFeedDirective=s}(i=t.NewsfeedOnsite||(t.NewsfeedOnsite={}))}(i=t.Widgets||(t.Widgets={}))}(t=e.Components||(e.Components={}))}(t=e.Dashboard||(e.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));var bs;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){var i;!function(t){t.statusCardDirectiveName="bsStatusCard",e.dashboardModule.directive(t.statusCardDirectiveName,function(){return new i});var i=function(){function t(){this.scope={item:"=?",resourceType:"=?",isMobileView:"=?"},this.restrict="E",this.template=e.Templates.statusCard,this.controller=["$scope","$filter",function(e,t){e.resourceHref=e.item.HrefBaseSpaceUI,"appsession"===e.resourceType&&(e.resourceHref=t("uiHref")({AppSession:e.item},"appsession")),e.openResource=function(){window.location.href=e.resourceHref}}]}return t}();t.StatusCardDirective=i}(i=t.Cards||(t.Cards={}))}(t=e.Components||(e.Components={}))}(t=e.Dashboard||(e.Dashboard={}))}(t=e.Areas||(e.Areas={}))}(bs||(bs={}));
//# sourceMappingURL=bs.tang.dashboard.min.js.map
